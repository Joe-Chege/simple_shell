# 0x16. C - Simple Shell (HSH)
This project consists of a basic command interpreter created in C language with several features; its development was part of ALX Software Engineering coding program.

## Description
HSH Simple Shell is a simple UNIX command language interpreter that reads commands from either a file or standard input and executes them.

## Requirements
- Allowed editors: vi, vim, emacs
- All your files will be compiled on Ubuntu 20.04 LTS using gcc, using the options -Wall -Werror -Wextra -pedantic -std=gnu89
- All your files should end with a new line
- A README.md file, at the root of the folder of the project is mandatory
- Your code should use the Betty style. It will be checked using betty-style.pl and betty-doc.pl
- Your shell should not have any memory leaks
- No more than 5 functions per file
- All your header files should be include guarded
- Use system calls only when you need to (why?)
- Write a README with the description of your project
- You should have an AUTHORS file at the root of your repository, listing all individuals having contributed content to the repository. Format, see Docker

### Allowed functions: 
-   `access` (man 2 access)
-   `chdir` (man 2 chdir)
-   `close` (man 2 close)
-   `closedir` (man 3 closedir)
-   `execve` (man 2 execve)
-   `exit` (man 3 exit)
-   `_exit` (man 2 _exit)
-   `fflush` (man 3 fflush)
-   `fork` (man 2 fork)
-   `free` (man 3 free)
-   `getcwd` (man 3 getcwd)
-   `getline` (man 3 getline)
-   `getpid` (man 2 getpid)
-   `isatty` (man 3 isatty)
-   `kill` (man 2 kill)
-   `malloc` (man 3 malloc)
-   `open` (man 2 open)
-   `opendir` (man 3 opendir)
-   `perror` (man 3 perror)
-   `read` (man 2 read)
-   `readdir` (man 3 readdir)
-   `signal` (man 2 signal)
-   `stat` (__xstat) (man 2 stat)
-   `lstat` (__lxstat) (man 2 lstat)
-   `fstat` (__fxstat) (man 2 fstat)
-   `strtok` (man 3 strtok)
-   `wait` (man 2 wait)
-   `waitpid` (man 2 waitpid)
-   `wait3` (man 2 wait3)
-   `wait4` (man 2 wait4)
-   `write` (man 2 write)

## How It Works

The shell program implemented in this code reads input from the user, parses it, and executes the appropriate commands. It is designed to mimic the functionality of the bash shell. 

When the program starts, it sets up a signal handler to catch the SIGINT signal (generated by pressing Ctrl+C). It then initializes various variables and structures, including the shell environment, the input buffer, and the command line arguments.

The program then enters a loop that reads input from the user, tokenizes it into separate commands, and executes them. Within the loop, each command is first checked to see if it is a built-in shell command, such as "exit" or "ls". If it is, the corresponding function is called. If not, the program searches for the command in the directories listed in the PATH environment variable and executes it if found.

After executing each command, the program frees any dynamically allocated memory and repeats the loop. If the input is received from a pipe, the program skips printing the "$ " prompt before each command.

Once the loop ends, the program frees all allocated memory and exits with the last command's exit status as its return value.

The shell program also includes various helper functions for handling strings, allocating memory, and searching for and executing commands.


### Installation
1. Simply clone the repo below 

```
https://github.com/Joe-Chege/simple_shell.git
```
2. Compile the program with the following:

```
gcc -Wall -Werror -Wextra -pedantic *.c -o hsh
```
By default, the name of the executable will be hsh, but you can change it if you desire to do so.

3. Execution:

Once the program is compiled you will need to execute the shell with the following code:


#### Interactive mode:
```
$ ./hsh
```

#### Non-interactive mode:
```
$ echo "command" | ./hsh
```

## Usage
```
shera/simple_shell$ echo "ls" | ./hsh
AUTHORS      main.c     setenvironment.c  tests
builtin_2.c  memory.c   shell.h           token.c
builtin.c    pathdir.c  signal_handler.c
globals.h    perror.c   str.c
hsh          README.md  _strtok.c
shera/simple_shell$ ./hsh
$ ls
AUTHORS      builtin.c  hsh     memory.c   perror.c   setenvironment.c  signal_handler.c  _strtok.c  token.c
builtin_2.c  globals.h  main.c  pathdir.c  README.md  shell.h           str.c             tests
$ ls -l
total 100
-rw-rw-r-- 1 shera shera   188 Apr 21 17:54 AUTHORS
-rw-rw-r-- 1 shera shera  3149 Apr 26 14:55 builtin_2.c
-rw-rw-r-- 1 shera shera  2272 Apr 26 14:55 builtin.c
-rw-rw-r-- 1 shera shera    91 Apr 26 01:54 globals.h
-rwxrwxr-x 1 shera shera 26712 Apr 26 01:56 hsh
-rw-rw-r-- 1 shera shera  1161 Apr 26 14:55 main.c
-rw-rw-r-- 1 shera shera   460 Apr 26 14:55 memory.c
-rw-rw-r-- 1 shera shera  4207 Apr 26 14:55 pathdir.c
-rw-rw-r-- 1 shera shera  1164 Apr 26 14:55 perror.c
-rw-rw-r-- 1 shera shera  4237 Apr 26 16:35 README.md
-rw-rw-r-- 1 shera shera  1697 Apr 26 14:55 setenvironment.c
-rwxrwxr-x 1 shera shera  1880 Apr 26 14:55 shell.h
-rw-rw-r-- 1 shera shera   291 Apr 26 14:55 signal_handler.c
-rw-rw-r-- 1 shera shera  2013 Apr 26 14:55 str.c
-rw-rw-r-- 1 shera shera  1204 Apr 26 14:55 _strtok.c
drwxrwxr-x 2 shera shera  4096 Apr 25 16:03 tests
-rw-rw-r-- 1 shera shera   662 Apr 26 14:55 token.c
$  /bin/ls
AUTHORS      builtin.c  hsh     memory.c   perror.c   setenvironment.c  signal_handler.c  _strtok.c  token.c
builtin_2.c  globals.h  main.c  pathdir.c  README.md  shell.h           str.c             tests
$ env
SHELL=/bin/bash
SESSION_MANAGER=local/shera-HP-EliteBook-840-G2:@/tmp/.ICE-unix/1872,unix/shera-HP-EliteBook-840-G2:/tmp/.ICE-unix/1872
QT_ACCESSIBILITY=1
COLORTERM=truecolor
XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg
SSH_AGENT_LAUNCHER=gnome-keyring
XDG_MENU_PREFIX=gnome-
TERM_PROGRAM_VERSION=1.77.3
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
LC_ADDRESS=en_GB.UTF-8
GNOME_SHELL_SESSION_MODE=ubuntu
LC_NAME=en_GB.UTF-8
SSH_AUTH_SOCK=/run/user/1000/keyring/ssh
XMODIFIERS=@im=ibus
DESKTOP_SESSION=ubuntu
LC_MONETARY=en_GB.UTF-8
BAMF_DESKTOP_FILE_HINT=/var/lib/snapd/desktop/applications/code_code.desktop
GTK_MODULES=gail:atk-bridge
PWD=/home/shera/Documents/GitHub/simple_shell
GSETTINGS_SCHEMA_DIR=/home/shera/snap/code/126/.local/share/glib-2.0/schemas
XDG_SESSION_DESKTOP=ubuntu
LOGNAME=shera
GTK_EXE_PREFIX=/snap/code/126/usr
XDG_SESSION_TYPE=wayland
SYSTEMD_EXEC_PID=1893
XAUTHORITY=/run/user/1000/.mutter-Xwaylandauth.LBQR31
VSCODE_GIT_ASKPASS_NODE=/snap/code/126/usr/share/code/code
IM_CONFIG_CHECK_ENV=1
GJS_DEBUG_TOPICS=JS ERROR;JS LOG
HOME=/home/shera
USERNAME=shera
IM_CONFIG_PHASE=1
LC_PAPER=en_GB.UTF-8
LANG=en_US.UTF-8
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
XDG_CURRENT_DESKTOP=Unity
WAYLAND_DISPLAY=wayland-0
GIT_ASKPASS=/snap/code/126/usr/share/code/resources/app/extensions/git/dist/askpass.sh
INVOCATION_ID=64a0306439824c119fca97a124d53486
MANAGERPID=1723
CHROME_DESKTOP=code-url-handler.desktop
GJS_DEBUG_OUTPUT=stderr
VSCODE_GIT_ASKPASS_EXTRA_ARGS=--ms-enable-electron-run-as-node
GNOME_SETUP_DISPLAY=:1
LESSCLOSE=/usr/bin/lesspipe %s %s
XDG_SESSION_CLASS=user
TERM=xterm-256color
LC_IDENTIFICATION=en_GB.UTF-8
GTK_PATH=/snap/code/126/usr/lib/x86_64-linux-gnu/gtk-3.0
LESSOPEN=| /usr/bin/lesspipe %s
USER=shera
VSCODE_GIT_IPC_HANDLE=/run/user/1000/vscode-git-640808b396.sock
DISPLAY=:0
SHLVL=1
LOCPATH=/snap/code/126/usr/lib/locale
LC_TELEPHONE=en_GB.UTF-8
QT_IM_MODULE=ibus
LC_MEASUREMENT=en_GB.UTF-8
PAPERSIZE=a4
XDG_RUNTIME_DIR=/run/user/1000
LC_TIME=en_GB.UTF-8
VSCODE_GIT_ASKPASS_MAIN=/snap/code/126/usr/share/code/resources/app/extensions/git/dist/askpass-main.js
JOURNAL_STREAM=8:32120
XDG_DATA_DIRS=/home/shera/snap/code/126/.local/share:/home/shera/snap/code/126:/snap/code/126/usr/share:/usr/share/ubuntu:/home/shera/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share/:/usr/share/:/var/lib/snapd/desktop
GDK_BACKEND=x11
PATH=/home/shera/.local/bin:/home/shera/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin
GTK_USE_PORTAL=1
GDMSESSION=ubuntu
ORIGINAL_XDG_CURRENT_DESKTOP=ubuntu:GNOME
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1000/bus
GTK_IM_MODULE_FILE=/home/shera/snap/code/common/.cache/immodules/immodules.cache
GIO_MODULE_DIR=/home/shera/snap/code/common/.cache/gio-modules
GIO_LAUNCHED_DESKTOP_FILE_PID=6764
GIO_LAUNCHED_DESKTOP_FILE=/var/lib/snapd/desktop/applications/code_code.desktop
LC_NUMERIC=en_GB.UTF-8
TERM_PROGRAM=vscode
_=./hsh
$ ./shell_0.4.1
./hsh: 5: ./shell_0.4.1: not found
$ exit 98
shera/simple_shell$ echo $?
98
shera/simple_shell$ ls /var ; ls /var
backups  cache  crash  lib  local  lock  log  mail  metrics  opt  run  snap  spool  tmp
backups  cache  crash  lib  local  lock  log  mail  metrics  opt  run  snap  spool  tmp
shera/simple_shell$ ./hsh
$ ls /var ; ls /var
backups  cache  crash  lib  local  lock  log  mail  metrics  opt  run  snap  spool  tmp
backups  cache  crash  lib  local  lock  log  mail  metrics  opt  run  snap  spool  tmp
$ echo $?
$?
$ ls /var
backups  cache  crash  lib  local  lock  log  mail  metrics  opt  run  snap  spool  tmp
$ echo $?
$?
$ echo $$?
$$?
$ echo $PATH
$PATH
$ sh
$ echo $$ # ls -la
10632
$ exit
$ exit
```



## Required:

* Operating System: [Ubuntu 14.04 LTS](http://releases.ubuntu.com/14.04/)

* Compiler: [GCC 4.8.4](https://gcc.gnu.org/gcc-4.8/)


## Acknowledgments

- ALX Community
- Hat tip to anyone whose code was used

## Authors:

- *Mitchell Wachera* - [@mitchellshera](https://github.com/mitchellshera) 
- *Joe Chege*  - [@Joe-Chege](https://github.com/Joe-Chege)
